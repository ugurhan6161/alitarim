(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[906],{6498:function(e,i,a){Promise.resolve().then(a.bind(a,7404))},7404:function(e,i,a){"use strict";a.r(i),a.d(i,{default:function(){return u}});var n=a(7437),l=a(2265),s=a(2298),t=a(2869),d=a(5186),r=a(6815),c=a(3647),o=a(4430),m=a(5243),h=a(7992),p=a(8930);function u(){let{partners:e,setPartners:i,payments:a,setPayments:u,cancellationDeductions:x,setCancellationDeductions:j}=(0,s.b)(),[g,v]=(0,l.useState)({partnerId:0,amount:0}),[y,N]=(0,l.useState)(!1),[b,f]=(0,l.useState)(!1),[k,w]=(0,l.useState)(null),z=(e,i)=>{w({type:e,id:i}),f(!0)};return(0,n.jsxs)(m.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.3},className:"space-y-4",children:[(0,n.jsx)("h1",{className:"text-2xl font-bold",children:"\xd6demeler ve İptal Kesintileri"}),(0,n.jsxs)(o.u_,{open:y,onOpenChange:N,children:[(0,n.jsx)(o.iq,{asChild:!0,children:(0,n.jsx)(t.z,{onClick:()=>N(!0),children:"Yeni \xd6deme Ekle"})}),(0,n.jsxs)(o.hz,{children:[(0,n.jsx)(o.xB,{children:(0,n.jsx)(o.r6,{children:"Yeni \xd6deme Ekle"})}),(0,n.jsxs)("div",{className:"space-y-4 mt-4",children:[(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(r._,{htmlFor:"partnerId",children:"İş Ortağı"}),(0,n.jsxs)(c.Ph,{onValueChange:e=>v({...g,partnerId:Number(e)}),children:[(0,n.jsx)(c.i4,{children:(0,n.jsx)(c.ki,{placeholder:"İş ortağı se\xe7in"})}),(0,n.jsx)(c.Bw,{children:e.map(e=>(0,n.jsx)(c.Ql,{value:e.id.toString(),children:e.name},e.id))})]})]}),(0,n.jsxs)("div",{className:"space-y-2",children:[(0,n.jsx)(r._,{htmlFor:"amount",children:"\xd6deme Miktarı"}),(0,n.jsx)(d.I,{id:"amount",type:"number",value:g.amount,onChange:e=>v({...g,amount:Number(e.target.value)})})]}),(0,n.jsx)(t.z,{onClick:()=>{g.partnerId&&g.amount&&(u([...a,{id:Date.now(),partnerId:g.partnerId,amount:g.amount,date:new Date().toISOString()}]),i(e.map(e=>e.id===g.partnerId?{...e,balance:e.balance-g.amount}:e)),v({partnerId:0,amount:0}),N(!1),(0,h.Am)({title:"Başarılı",description:"\xd6deme başarıyla kaydedildi.",duration:3e3}))},children:"\xd6deme Yap"})]})]})]}),(0,n.jsx)(o.u_,{open:b,onOpenChange:f,children:(0,n.jsxs)(o.hz,{children:[(0,n.jsx)(o.xB,{children:(0,n.jsx)(o.r6,{children:(null==k?void 0:k.type)==="payment"?"\xd6demeyi Sil":"İptal Kesintisini Sil"})}),(0,n.jsx)("div",{className:"py-4",children:(0,n.jsxs)("p",{children:["Bu ",(null==k?void 0:k.type)==="payment"?"\xf6demeyi":"iptal kesintisini"," silmek istediğinizden emin misiniz? Bu işlem geri alınamaz."]})}),(0,n.jsxs)(o.mz,{children:[(0,n.jsx)(t.z,{variant:"outline",onClick:()=>f(!1),children:"İptal"}),(0,n.jsx)(t.z,{variant:"destructive",onClick:()=>{if(k){if("payment"===k.type){let n=a.find(e=>e.id===k.id);n&&(u(a.filter(e=>e.id!==k.id)),i(e.map(e=>e.id===n.partnerId?{...e,balance:e.balance+n.amount}:e)))}else{let a=x.find(e=>e.id===k.id);a&&(j(x.filter(e=>e.id!==k.id)),i(e.map(e=>e.id===a.partnerId?{...e,balance:e.balance+a.amount}:e)))}f(!1),w(null),(0,h.Am)({title:"Başarılı",description:"".concat("payment"===k.type?"\xd6deme":"İptal kesintisi"," başarıyla silindi."),duration:3e3})}},children:"Sil"})]})]})}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"Yapılan \xd6demeler"}),(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map(i=>{var a;return(0,n.jsxs)(m.E.div,{whileHover:{scale:1.05},className:"p-4 bg-white shadow-lg rounded-lg relative",children:[(0,n.jsx)("p",{className:"font-semibold",children:null===(a=e.find(e=>e.id===i.partnerId))||void 0===a?void 0:a.name}),(0,n.jsxs)("p",{children:["Miktar: ₺",i.amount.toFixed(2)]}),(0,n.jsxs)("p",{children:["Tarih: ",new Date(i.date).toLocaleDateString()]}),(0,n.jsx)(t.z,{variant:"ghost",size:"icon",className:"absolute top-2 right-2",onClick:()=>z("payment",i.id),children:(0,n.jsx)(p.Z,{className:"h-4 w-4"})})]},i.id)})})]}),(0,n.jsxs)("div",{className:"space-y-4",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold",children:"İptal Kesintileri"}),(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:x.map(i=>{var a;return(0,n.jsxs)(m.E.div,{whileHover:{scale:1.05},className:"p-4 bg-white shadow-lg rounded-lg relative",children:[(0,n.jsx)("p",{className:"font-semibold",children:null===(a=e.find(e=>e.id===i.partnerId))||void 0===a?void 0:a.name}),(0,n.jsxs)("p",{children:["Miktar: ₺",i.amount.toFixed(2)]}),(0,n.jsxs)("p",{children:["Tarih: ",new Date(i.date).toLocaleDateString()]}),(0,n.jsx)(t.z,{variant:"ghost",size:"icon",className:"absolute top-2 right-2",onClick:()=>z("cancellation",i.id),children:(0,n.jsx)(p.Z,{className:"h-4 w-4"})})]},i.id)})})]})]})}}},function(e){e.O(0,[569,243,481,248,502,495,971,117,744],function(){return e(e.s=6498)}),_N_E=e.O()}]);